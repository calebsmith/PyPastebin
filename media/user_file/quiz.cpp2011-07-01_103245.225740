#include <iostream>
#include <string>
#include <time.h>
#include <stdlib.h>
#include <stdio.h>

#include "classes.h"
#include "functions.h"
using namespace std;
int random(int low, int high){
	int a;
	a = rand() % high + low;

	return a;
}
void shuffle(int* order, int cards)
{
	int i;
	int r;
	for (i = 0; i < cards; i++) order[i] = i;
	for (i = 0; i < cards; i++)
	{
		r = random(0,cards);
		if (r != i)
		{
			order[i] = r;
			order[r] = i;
		}
	}
	return;
}
void quiz (Deck &a)
{
	srand ( time(NULL) );
	int i;
	string prompt;
	int length;
	int total;
	int cards = a.get_cards();
	int* order; order = new int[cards + 1];
	string* strbuffer; strbuffer = new string[cards + 1];
	string val;
	bool* correct; correct = new bool[cards + 1];
	bool alldone = 0;
	for (i = 0; i < cards; i++) correct[i] = 0;
	shuffle(order,cards);
	
	while(alldone == 0)
	{
		for (i = 0; i < cards; i++)
		{
			if (correct[i] == 0)
			{
				prompt = a.item[i].get_tagline();
				length = a.item[i].get_num_lines();
				cout << "Card reads - " << prompt << '\n';
				cout << "Type your answer: ";
				cin >> strbuffer[i]; cout << '\n';
				a.item[i].show();
				cout << "Is your answer correct? (1 - yes, 2 - no)" << '\n';
				cin >> val;

				if (val == "1") {
					cout << "Good job." << '\n';
					correct[i] = 1;
				}
				if (val == "2") cout << "We'll have to come back to this one." << '\n';
				cin.clear();
			}

		}
		total = 0;
		for (i = 0; i < cards; i++) if (correct[i] == 1) total++;
		cout << total << " right so far." << '\n';
		if (total >= cards) {
			alldone = 1;
			cout << "Congratulations! All cards have been answered correctly." << '\n';
		}
	}
	getline(cin, val);
	cout << '\n';
	return;
}

